#VRML V2.0 utf8

Viewpoint {
	orientation	0 1 0 1.57
	position 30 0 0
}

DEF nguoi Transform {
	children [
		DEF than Transform {
			children [
				#dau nguoi
				Transform {
					translation	0 3 0
					scale 0.8 1 0.8
					children [
						Shape {
							geometry Sphere { radius	1.5}
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
						}
					]
				}
				#toc
				Transform {
					translation	0 3.5 0
					scale 0.8 0.7 0.8
					children [
						Shape {
							geometry Sphere { radius	1.5}
							appearance Appearance {
								material Material {
									ambientIntensity 0
									diffuseColor 0 0 0
									specularColor .29 .3 .29
									shininess .08
								}
							}
						}
					]
				}
				#mat
				Transform {
					translation	0.5 2.8 0.9
					children [
						Shape {
							geometry Sphere { radius	0.2}
							appearance Appearance {
								material Material {
									ambientIntensity 0
									diffuseColor 0 0 0
									specularColor .29 .3 .29
									shininess .08
								}
							}
						}
					]
				}
				Transform {
					translation	-0.5 2.8 0.9
					children [
						Shape {
							geometry Sphere { radius	0.2}
							appearance Appearance {
								material Material {
									ambientIntensity 0
									diffuseColor 0 0 0
									specularColor .29 .3 .29
									shininess .08
								}
							}
						}
					]
				}
				#mieng
				Transform {
					translation	0 2 0.8
					scale 3 1 1
					children [
						Shape {
							geometry Sphere { radius	0.1}
							appearance Appearance {
								material Material {
									ambientIntensity .0833
									diffuseColor .996 0 0
									shininess .08
								}
							}
						}
					]
				}
				#mui
				Transform {
					translation	0 2.5 1
					scale 1 3 1
					children [
						Shape {
							geometry Sphere { radius	0.1}
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
						}
					]
				}
				#dai dau
				Transform {
					translation	0 3.3 0
					scale 0.8 1 0.8
					children [
						Shape {
							geometry Cylinder {
								height 0.5
								radius 1.5
								bottom FALSE
								top	FALSE
								side TRUE
							}
							appearance Appearance {
								material Material {
									diffuseColor .88 .15 .01
									specularColor .19 .03 .03
									ambientIntensity .0833
									shininess .08
								}
							}
						}
					]
				}
				Transform {
					translation	1.2 2.8 0
					children [
						Shape {
							geometry Box {size 0 1.5 0.3}
							appearance Appearance {
								material Material {
									diffuseColor .88 .15 .01
									specularColor .19 .03 .03
									ambientIntensity .0833
									shininess .08
								}
							}
						}
					]
				}
				#tai
				Transform {
					translation	1.1 2.8 0
					scale 1 3 1
					children [
						DEF taitrai Shape {
							geometry Sphere { radius	0.1}
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
						}
					]
				}
				DEF	taiphai Transform {
					translation	-1.1 2.8 0
					scale 1 3 1
					children USE taitrai
				}
				#co
				Transform  {
					translation 0 1 0  
					children [
						Shape {
							appearance	Appearance {
								material Material {
									ambientIntensity 0
								}
							}
							geometry Extrusion {
								crossSection [
									2.00	0.00
									1.85	0.77
									1.41	1.41
									0.77	1.85
									0.00	2.00
									-0.77	1.85
									-1.41	1.41
									-1.85	0.77
									-2.00	0.00
									-1.85	-0.77
									-1.41	-1.41
									-0.77	-1.85
									0.00	-2.00
									0.77	-1.85
									1.41	-1.41
									1.85	-0.77
									2.00	0.00
								]
								spine [0 0 0,0 0.2 0,0 0.4 0,0 0.7 0]
								scale [0.4 0.4,0.26 0.26,0.22 0.22,0.21 0.21]
								creaseAngle	1
								beginCap TRUE
								endCap TRUE
								solid FALSE
							}

						}
					]
				}
				#than
				Transform {
					translation 0 1 0  
					children [
						Shape {
							appearance	Appearance {
								material Material {
									ambientIntensity 0
								}
								texture	ImageTexture {
									url	"ao2.jpg"
									repeatS	TRUE
									repeatT	TRUE
								}
							}
							geometry Extrusion {
								crossSection [
									2.00	0.00
									1.85	0.77
									1.41	1.41
									0.77	1.85
									0.00	2.00
									-0.77	1.85
									-1.41	1.41
									-1.85	0.77
									-2.00	0.00
									-1.85	-0.77
									-1.41	-1.41
									-0.77	-1.85
									0.00	-2.00
									0.77	-1.85
									1.41	-1.41
									1.85	-0.77
									2.00	0.00
								]
								spine [0 0 0,0 -0.7 0,0 -1.2 0,0 -1.2 0,0 -4 0]
								scale [0.4 0.4,1 0.5,1.2 0.5,0.6 0.5,0.6 0.5]
								creaseAngle	1
								beginCap TRUE
								endCap TRUE
								solid FALSE
							}

						}
					]
				}
				#ao
				#				Transform {
				#					translation 0 1 0  
				#					children [
				#						Shape {
				#							appearance	Appearance {
				#								material Material {
				#									diffuseColor 0 0 0
				#									ambientIntensity 0
				#									shininess .08
				#								}
				#							}
				#							geometry Extrusion {
				#								crossSection [
				#									2.00	0.00
				#									1.85	0.77
				#									1.41	1.41
				#									0.77	1.85
				#									0.00	2.00
				#									-0.77	1.85
				#									-1.41	1.41
				#									-1.85	0.77
				#									-2.00	0.00
				#									-1.85	-0.77
				#									-1.41	-1.41
				#									-0.77	-1.85
				#									0.00	-2.00
				#									0.77	-1.85
				#									1.41	-1.41
				#									1.85	-0.77
				#									2.00	0.00
				#								]
				#								spine [0 0 0,0 -0.7 0,0 -1.2 0,0 -1.8 0,0 -4.7 0]
				#								scale [0.41 0.41,1.01 0.51,1.21 0.51,0.61 0.51,0.61 0.51]
				#								creaseAngle	1
				#								beginCap TRUE
				#								endCap TRUE
				#								solid FALSE
				#							}

				#						}
				#					]
				#				}
				#				Transform {
				#					translation	0 -3.1 0
				#					scale 1 1 0.8
				#					children [
				#						Shape {
				#							geometry Cylinder {
				#								height 0.3
				#								radius 1.3
				#								bottom FALSE
				#								top	FALSE
				#								side TRUE
				#							}
				#							appearance Appearance {
				#								material Material {
				#									diffuseColor .88 .15 .01
				#									ambientIntensity .0833
				#									shininess .08
				#									specularColor .19 .03 .03
				#								}
				#							}
				#						}
				#					]
				#				}
				#quan
				#mat truoc
				Transform {
					translation	0 -5 0.7
					children [
						DEF mattruoc Shape {
							geometry Box {size 1.4 4 0}
							appearance Appearance {
								material Material {
									diffuseColor 0 0 0
									ambientIntensity 0
									shininess .08
								}
							}
						}
					]
				}
				Transform {
					translation	0.7 -5 0.7
					children [
						DEF mattruoc1 Shape {
							geometry Box {size 0.3 4 0.01}
							appearance Appearance {
								material Material {
									diffuseColor .88 .15 .01
									ambientIntensity .0833
									shininess .08
									specularColor .19 .03 .03
								}
							}
						}
					]
				}
				Transform {
					translation	-0.7 -5 0.7
					children USE mattruoc1
				}
				#mat sau
				Transform {
					translation	0 -5 -0.7
					children USE mattruoc
				}
				Transform {
					translation	-0.7 -5 -0.7
					children USE mattruoc1
				}
				Transform {
					translation	0.7 -5 -0.7
					children USE mattruoc1
				}

			]
		}
		#chan phai	   -0.6 -3 0
		DEF chanphai Transform {
			center -0.6 -3  0
			children  [
				DEF	chanphai1 Transform {
					children [
						Transform {
							translation	-0.6 -3 0
							children [
								Shape {
									appearance Appearance {
										material Material {
											ambientIntensity 0
										}
									}
									geometry Extrusion {
										crossSection [
											2.00	0.00
											1.85	0.77
											1.41	1.41
											0.77	1.85
											0.00	2.00
											-0.77	1.85
											-1.41	1.41
											-1.85	0.77
											-2.00	0.00
											-1.85	-0.77
											-1.41	-1.41
											-0.77	-1.85
											0.00	-2.00
											0.77	-1.85
											1.41	-1.41
											1.85	-0.77
											2.00	0.00
										]
										spine [0 0 0,0 -1.4 0,0 -2.4 0,0 -3 0,0 -4.9 0]
										scale [0.3 0.35,0.27 0.27,0.2 0.2,0.22 0.22,0.16 0.16]
										creaseAngle	1
										beginCap TRUE
										endCap TRUE
										solid FALSE
									}
								}
							]
						}
						#ban chan
						Transform {
							translation	-0.6 -7.9 0.28 
							scale 1.4 0.6 2.5
							children [
								Shape {
									geometry Sphere	{radius 0.25}
									appearance Appearance {
										material Material {
											ambientIntensity 0
										}
									}
								}
							]
						}
					]
				}
			]
		}
		#chan trai	   0.6 -3 0
		DEF	chantrai Transform {
			center -0.6 -3  0
			translation	1.2 0 0
			children USE chanphai1
		}
		#tay phai	  -1.7 0 0
		DEF	tayphai Transform {
			children [
				Transform {
					translation	-1.7 0 0
					children [
						Shape {
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
							geometry Extrusion {
								crossSection [
									2.00	0.00
									1.85	0.77
									1.41	1.41
									0.77	1.85
									0.00	2.00
									-0.77	1.85
									-1.41	1.41
									-1.85	0.77
									-2.00	0.00
									-1.85	-0.77
									-1.41	-1.41
									-0.77	-1.85
									0.00	-2.00
									0.77	-1.85
									1.41	-1.41
									1.85	-0.77
									2.00	0.00
								]
								#spine [0 0 0,0 -2 0,0.15 -4 0.15]
								spine [0 0 0,0 -2 0,0 -2 2]
								scale [0.23 0.23,0.16 0.16,0.14 0.14]
								creaseAngle	1
								beginCap TRUE
								endCap TRUE
								solid FALSE
							}
						}
					]
				}
				#ban tay
				Transform {
					translation	-1.7 -2 2.15
					scale 0.8 0.8 1
					children [
						Shape {
							geometry Sphere { radius	0.35}
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
						}
					]
				}
				#giao
				DEF giao Transform {
					children [
						Transform {
							translation	-1.7 1 5.15
							scale 1.55 2 1.55
							rotation 1 0 0 0.785
							children [
								Inline {
									url "giao.wrl"
									bboxCenter 0 0 0
									bboxSize -1 -1 -1
								}
							]
						}
					]
				}
			]
		}
		#tay trai	1.7 0 0
		DEF	taytrai Transform {
			children [
				Transform {
					translation	1.7 0 0
					children [
						Shape {
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
							geometry Extrusion {
								crossSection [
									2.00	0.00
									1.85	0.77
									1.41	1.41
									0.77	1.85
									0.00	2.00
									-0.77	1.85
									-1.41	1.41
									-1.85	0.77
									-2.00	0.00
									-1.85	-0.77
									-1.41	-1.41
									-0.77	-1.85
									0.00	-2.00
									0.77	-1.85
									1.41	-1.41
									1.85	-0.77
									2.00	0.00
								]
								spine [0 0 0,0 -2 0,-0.15 -4 0.15]
								scale [0.23 0.23,0.16 0.16,0.14 0.14]
								creaseAngle	1
								beginCap TRUE
								endCap TRUE
								solid FALSE
							}
						}
					]
				}
				#ban tay
				Transform {
					translation	1.55 -4.1 0.15
					scale 0.8 1 0.8
					children [
						Shape {
							geometry Sphere { radius	0.35}
							appearance Appearance {
								material Material {
									ambientIntensity 0
								}
							}
						}
					]
				}
			]
		}
		DEF	touch TouchSensor {
			enabled	TRUE
		}

	]
}

DEF trau Transform {
	center 4 -5.5 10
	children [
		Transform {
			translation	4 0 10
			rotation 0 1 0 1.57
			scale 2 2 2
			children [
				Inline {
					url	"contrau.wrl"
					bboxCenter 0 0 0
					bboxSize -1 -1 -1
				}
			]
		}
		DEF lacthan OrientationInterpolator	{
			key [0.8,1]
			keyValue [ 1 0 0 0,  1 0 0 1.57]	
		}
	]
}
#Transform {	
#scale	2 2 2	
#	translation	3 0 10
#	children [
#		Inline {url	"Dong/nguoiCamLao.wrl"}
#	]
#}
#Thoi gian
DEF time TimeSensor {
	enabled	FALSE
	cycleInterval 3
	loop FALSE
	startTime 0 
	stopTime 0 
}

#Dam giao
DEF damgiao OrientationInterpolator	{

	key	[0,0.16,0.32,0.48,0.64,0.80,1]
	keyValue [1 0 0 0,1 0 0 0.9,1 0 0 0.9,1 0 0 0.5,1 0 0 0.5,1 0 0 0.9,1 0 0 0.9] 
}

DEF chanphaidichuyen OrientationInterpolator	{
	key	[0,0.2,0.4,0.6,0.8,1]
	keyValue [1 0 0 0,1 0 0 -0.3,1 0 0 0.3,1 0 0 0,1 0 0 0,1 0 0 0]
}
DEF	chantraidichuyen OrientationInterpolator {
	key	[0,0.2,0.4,0.6,0.8,1]
	keyValue [1 0 0 0,1 0 0 0.3,1 0 0 -0.3,1 0 0 0,1 0 0 0,1 0 0 0]
}
DEF nguoidichuyen PositionInterpolator {
	key	[0,0.2,0.4,0.6,0.8,1]
	keyValue [0 0 0,0 0 1,0 0 2.2,0 0 3.2,0 0 3.2,0 0 3.2]
}
DEF	taytraidichuyen OrientationInterpolator {
	key	[0,0.2,0.4,0.6,0.8,1]
	keyValue [1 0 0 0,1 0 0 -0.3,1 0 0 0.3,1 0 0 0,1 0 0 0,1 0 0 0]
}


DEF ma Script {
	eventIn	SFBool turnOn
	field SFBool turn FALSE
	eventOut SFBool	on
	url	"javascript:
	function turnOn(val){
		if(val){
			turn=!turn;
			if(turn){
				on=TRUE;
			}else{
				on=FALSE;
			}
		}
	}
	
	"
}

ROUTE touch.isActive TO	ma.turnOn
ROUTE ma.on	TO time.enabled
ROUTE touch.touchTime TO time.startTime
ROUTE time.fraction_changed	TO damgiao.set_fraction
ROUTE damgiao.value_changed	TO tayphai.rotation

ROUTE time.fraction_changed TO	lacthan.set_fraction
ROUTE lacthan.value_changed TO trau.rotation

ROUTE time.fraction_changed	TO chantraidichuyen.set_fraction
ROUTE chantraidichuyen.value_changed TO	chantrai.rotation
ROUTE time.fraction_changed	TO chanphaidichuyen.set_fraction
ROUTE chanphaidichuyen.value_changed TO	chanphai.rotation
ROUTE time.fraction_changed	TO nguoidichuyen.set_fraction
ROUTE nguoidichuyen.value_changed TO nguoi.translation
ROUTE time.fraction_changed	TO taytraidichuyen.set_fraction
ROUTE taytraidichuyen.value_changed TO	taytrai.rotation


